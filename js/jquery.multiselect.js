"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(x){var o={columns:1,search:!1,searchOptions:{delay:250,showOptGroups:!1,searchText:!0,searchValue:!1,onSearch:function(t){}},texts:{placeholder:"Select options",search:"Search",selectedOptions:" selected",selectAll:"Select all",unselectAll:"Unselect all",noneSelected:"None Selected"},selectAll:!1,selectGroup:!1,minHeight:200,maxHeight:null,maxWidth:null,maxPlaceholderWidth:null,maxPlaceholderOpts:10,showCheckbox:!0,checkboxAutoFit:!1,optionAttributes:[],onLoad:function(t){},onOptionClick:function(t,e){},onControlClose:function(t){},onSelectAll:function(t,e){},minSelect:!1,maxSelect:!1},n=1;function i(t,e){if(this.element=t,this.options=x.extend(!0,{},o,e),this.updateSelectAll=!0,this.updatePlaceholder=!0,!x(this.element).attr("multiple"))throw new Error("[jQuery-MultiSelect] Select list must be a multiselect list in order to use this plugin");if(this.options.search&&!this.options.searchOptions.searchText&&!this.options.searchOptions.searchValue)throw new Error("[jQuery-MultiSelect] Either searchText or searchValue should be true.");"placeholder"in this.options&&(this.options.texts.placeholder=this.options.placeholder,delete this.options.placeholder),"default"in this.options.searchOptions&&(this.options.texts.search=this.options.searchOptions.default,delete this.options.searchOptions.default),this.load()}"function"!=typeof Array.prototype.map&&(Array.prototype.map=function(t,e){return void 0===e&&(e=this),x.isArray(e)?x.map(e,t):[]}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),i.prototype={load:function(){var i=this;if("SELECT"!=i.element.nodeName||x(i.element).hasClass("jqmsLoaded"))return!0;x(i.element).addClass("jqmsLoaded").data("plugin_multiselect-instance",i),x(i.element).after('<div class="ms-options-wrap"><button type="button"><span>None Selected</span></button><div class="ms-options"><ul></ul></div></div>');var o=x(i.element).next(".ms-options-wrap").find("> button:first-child"),n=x(i.element).next(".ms-options-wrap").find("> .ms-options"),l=n.find("> ul");if(i.options.showCheckbox?i.options.checkboxAutoFit&&n.addClass("checkbox-autofit"):n.addClass("hide-checkbox"),x(i.element).prop("disabled")&&o.prop("disabled",!0),i.options.maxPlaceholderWidth&&o.css("maxWidth",i.options.maxPlaceholderWidth),i.options.maxHeight)var t=i.options.maxHeight;else t=x(window).height()-n.offset().top+x(window).scrollTop()-20;if(t=t<i.options.minHeight?i.options.minHeight:t,n.css({maxWidth:i.options.maxWidth,minHeight:i.options.minHeight,maxHeight:t}),n.bind("touchmove mousewheel DOMMouseScroll",function(t){if(x(this).outerHeight()<x(this)[0].scrollHeight){var e=t.originalEvent,o=e.wheelDelta||-e.detail;x(this).outerHeight()+x(this)[0].scrollTop>x(this)[0].scrollHeight&&(t.preventDefault(),this.scrollTop+=o<0?1:-1)}}),x(document).off("click.ms-hideopts").on("click.ms-hideopts",function(t){x(t.target).closest(".ms-options-wrap").length||x(".ms-options-wrap.ms-active > .ms-options").each(function(){x(this).closest(".ms-options-wrap").removeClass("ms-active");var t=x(this).parent().prev(".jqmsLoaded").data("plugin_multiselect-instance");"function"==typeof t.options.onControlClose&&t.options.onControlClose(t.element)})}).bind("keydown",function(t){27==(t.keyCode||t.which)&&x(this).trigger("click.ms-hideopts")}),o.bind("keydown",function(t){var e=t.keyCode||t.which;13!=e&&32!=e||o.trigger("mousedown")}),o.bind("mousedown",function(t){if(t.which&&1!=t.which)return!0;if(x(".ms-options-wrap.ms-active > .ms-options").each(function(){if(x(this).parent().prev()[0]!=n.parent().prev()[0]){x(this).closest(".ms-options-wrap").removeClass("ms-active");var t=x(this).parent().prev(".jqmsLoaded").data("plugin_multiselect-instance");"function"==typeof t.options.onControlClose&&t.options.onControlClose(t.element)}}),n.closest(".ms-options-wrap").toggleClass("ms-active"),n.closest(".ms-options-wrap").hasClass("ms-active")){if(n.css("maxHeight",""),i.options.maxHeight)var e=i.options.maxHeight;else e=x(window).height()-n.offset().top+x(window).scrollTop()-20;e&&(e=e<i.options.minHeight?i.options.minHeight:e,n.css("maxHeight",e))}else"function"==typeof i.options.onControlClose&&i.options.onControlClose(i.element)}).click(function(t){t.preventDefault()}),i.options.texts.placeholder&&o.find("span").text(i.options.texts.placeholder),i.options.search){l.before('<div class="ms-search"><input type="text" value="" placeholder="'+i.options.texts.search+'" /></div>');var s=n.find(".ms-search input");s.on("keyup",function(){if(x(this).data("lastsearch")==x(this).val())return!0;x(this).data("searchTimeout")&&clearTimeout(x(this).data("searchTimeout"));var e=x(this);x(this).data("searchTimeout",setTimeout(function(){e.data("lastsearch",e.val()),"function"==typeof i.options.searchOptions.onSearch&&i.options.searchOptions.onSearch(i.element);var t=x.trim(s.val().toLowerCase());t?(l.find('li[data-search-term*="'+t+'"]:not(.optgroup)').removeClass("ms-hidden"),l.find('li:not([data-search-term*="'+t+'"], .optgroup)').addClass("ms-hidden")):l.find(".ms-hidden").removeClass("ms-hidden"),i.options.searchOptions.showOptGroups||l.find(".optgroup").each(function(){x(this).find("li:not(.ms-hidden)").length?x(this).show():x(this).hide()}),i._updateSelectAllText()},i.options.searchOptions.delay))})}i.options.selectAll&&l.before('<a href="#" class="ms-selectall global">'+i.options.texts.selectAll+"</a>"),n.on("click",".ms-selectall",function(t){t.preventDefault(),i.updateSelectAll=!1,i.updatePlaceholder=!1;var e=n.parent().prev();if(x(this).hasClass("global"))l.find("li:not(.optgroup, .selected, .ms-hidden)").length?(l.find("li:not(.optgroup, .selected, .ms-hidden)").addClass("selected"),l.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",!0)):(l.find("li:not(.optgroup, .ms-hidden).selected").removeClass("selected"),l.find('li:not(.optgroup, .ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",!1));else if(x(this).closest("li").hasClass("optgroup")){var o=x(this).closest("li.optgroup");o.find("li:not(.selected, .ms-hidden)").length?(o.find("li:not(.selected, .ms-hidden)").addClass("selected"),o.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",!0)):(o.find("li:not(.ms-hidden).selected").removeClass("selected"),o.find('li:not(.ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",!1))}var s=[];l.find('li.selected input[type="checkbox"]').each(function(){s.push(x(this).val())}),e.val(s).trigger("change"),i.updateSelectAll=!0,i.updatePlaceholder=!0,"function"==typeof i.options.onSelectAll&&i.options.onSelectAll(i.element,s.length),i._updateSelectAllText(),i._updatePlaceholderText()});var a=[];x(i.element).children().each(function(){if("OPTGROUP"==this.nodeName){var s=[];x(this).children("option").each(function(){for(var t={},e=0;e<i.options.optionAttributes.length;e++){var o=i.options.optionAttributes[e];void 0!==x(this).attr(o)&&(t[o]=x(this).attr(o))}s.push({name:x(this).text(),value:x(this).val(),checked:x(this).prop("selected"),attributes:t})}),a.push({label:x(this).attr("label"),options:s})}else{if("OPTION"!=this.nodeName)return!0;for(var t={},e=0;e<i.options.optionAttributes.length;e++){var o=i.options.optionAttributes[e];void 0!==x(this).attr(o)&&(t[o]=x(this).attr(o))}a.push({name:x(this).text(),value:x(this).val(),checked:x(this).prop("selected"),attributes:t})}}),i.loadOptions(a,!0,!1),n.on("click",'input[type="checkbox"]',function(){x(this).closest("li").toggleClass("selected"),n.parent().prev().find('option[value="'+x(this).val()+'"]').prop("selected",x(this).is(":checked")).closest("select").trigger("change"),"function"==typeof i.options.onOptionClick&&i.options.onOptionClick(i.element,this),i._updateSelectAllText(),i._updatePlaceholderText()}),n.on("focusin",'input[type="checkbox"]',function(){x(this).closest("label").addClass("focused")}).on("focusout",'input[type="checkbox"]',function(){x(this).closest("label").removeClass("focused")}),"function"==typeof i.options.onLoad&&i.options.onLoad(i.element),x(i.element).hide()},loadOptions:function(t,e,o){e="boolean"!=typeof e||e,o="boolean"!=typeof o||o;var s=this,i=x(s.element),n=i.next(".ms-options-wrap").find("> .ms-options > ul"),l=i.next(".ms-options-wrap").find("> .ms-options");e&&(n.find("> li").remove(),o&&i.find("> *").remove());var a=[];for(var p in t)if(t.hasOwnProperty(p)){var c=t[p],r=x("<li/>"),h=!0;if(c.hasOwnProperty("value")){if(s.options.showCheckbox&&s.options.checkboxAutoFit&&r.addClass("ms-reflow"),s._addOption(r,c),o){var d=x('<option value="'+c.value+'">'+c.name+"</option>");c.hasOwnProperty("attributes")&&Object.keys(c.attributes).length&&d.attr(c.attributes),c.checked&&d.prop("selected",!0),i.append(d)}}else{if(!c.hasOwnProperty("options"))continue;var u=x('<optgroup label="'+c.label+'"></optgroup>');for(var m in n.find("> li.optgroup > span.label").each(function(){x(this).text()==c.label&&(r=x(this).closest(".optgroup"),h=!1)}),o&&(i.find('optgroup[label="'+c.label+'"]').length?u=i.find('optgroup[label="'+c.label+'"]'):i.append(u)),h&&(r.addClass("optgroup"),r.append('<span class="label">'+c.label+"</span>"),r.find("> .label").css({clear:"both"}),s.options.selectGroup&&r.append('<a href="#" class="ms-selectall">'+s.options.texts.selectAll+"</a>"),r.append("<ul/>")),c.options)if(c.options.hasOwnProperty(m)){var f=c.options[m],v=x("<li/>");if(s.options.showCheckbox&&s.options.checkboxAutoFit&&v.addClass("ms-reflow"),f.hasOwnProperty("value")&&(s._addOption(v,f),r.find("> ul").append(v),o)){d=x('<option value="'+f.value+'">'+f.name+"</option>");f.hasOwnProperty("attributes")&&Object.keys(f.attributes).length&&d.attr(f.attributes),f.checked&&d.prop("selected",!0),u.append(d)}}}h&&a.push(r)}if(n.append(a),s.options.checkboxAutoFit&&s.options.showCheckbox&&!l.hasClass("hide-checkbox")){var g=n.find('.ms-reflow:eq(0) input[type="checkbox"]');if(g.length){var b=g.outerWidth();b=b||15,n.find(".ms-reflow label").css("padding-left",2*parseInt(g.closest("label").css("padding-left"))+b),n.find(".ms-reflow").removeClass("ms-reflow")}}s._updatePlaceholderText(),l.find("ul").css({"column-count":"","column-gap":"","-webkit-column-count":"","-webkit-column-gap":"","-moz-column-count":"","-moz-column-gap":""}),i.find("optgroup").length?(n.find("> li:not(.optgroup)").css({float:"left",width:100/s.options.columns+"%"}),n.find("li.optgroup").css({clear:"both"}).find("> ul").css({"column-count":s.options.columns,"column-gap":0,"-webkit-column-count":s.options.columns,"-webkit-column-gap":0,"-moz-column-count":s.options.columns,"-moz-column-gap":0}),this._ieVersion()&&this._ieVersion()<10&&n.find("li.optgroup > ul > li").css({float:"left",width:100/s.options.columns+"%"})):(n.css({"column-count":s.options.columns,"column-gap":0,"-webkit-column-count":s.options.columns,"-webkit-column-gap":0,"-moz-column-count":s.options.columns,"-moz-column-gap":0}),this._ieVersion()&&this._ieVersion()<10&&n.find("> li").css({float:"left",width:100/s.options.columns+"%"})),s._updateSelectAllText()},settings:function(t){this.options=x.extend(!0,{},this.options,t),this.reload()},unload:function(){x(this.element).next(".ms-options-wrap").remove(),x(this.element).show(function(){x(this).css("display","").removeClass("jqmsLoaded")})},reload:function(){x(this.element).next(".ms-options-wrap").remove(),x(this.element).removeClass("jqmsLoaded"),this.load()},reset:function(){var t=[];x(this.element).find("option").each(function(){x(this).prop("defaultSelected")&&t.push(x(this).val())}),x(this.element).val(t),this.reload()},disable:function(t){t="boolean"!=typeof t||t,x(this.element).prop("disabled",t),x(this.element).next(".ms-options-wrap").find("button:first-child").prop("disabled",t)},_updateSelectAllText:function(){if(this.updateSelectAll){var e=this;if(e.options.selectAll||e.options.selectGroup)x(e.element).next(".ms-options-wrap").find("> .ms-options").find(".ms-selectall").each(function(){var t=x(this).parent().find("li:not(.optgroup,.selected,.ms-hidden)");x(this).text(t.length?e.options.texts.selectAll:e.options.texts.unselectAll)})}},_updatePlaceholderText:function(){if(this.updatePlaceholder){var t=x(this.element),e=t.val()?t.val():[],o=t.next(".ms-options-wrap").find("> button:first-child"),s=o.find("span"),i=t.next(".ms-options-wrap").find("> .ms-options");t.find("option:selected:disabled").length&&(e=[],t.find("option:selected").each(function(){e.push(x(this).val())}));var n=[];for(var l in e)if(e.hasOwnProperty(l)&&(n.push(x.trim(t.find('option[value="'+e[l]+'"]').text())),n.length>=this.options.maxPlaceholderOpts))break;s.text(n.join(", ")),n.length?i.closest(".ms-options-wrap").addClass("ms-has-selections"):i.closest(".ms-options-wrap").removeClass("ms-has-selections"),n.length?(s.width()>o.width()||n.length!=e.length)&&s.text(e.length+this.options.texts.selectedOptions):s.text(this.options.texts.placeholder)}},_addOption:function(t,e){var o=x("<label/>",{for:"ms-opt-"+n,text:e.name}),s=x("<input>",{type:"checkbox",title:e.name,id:"ms-opt-"+n,value:e.value});e.hasOwnProperty("attributes")&&Object.keys(e.attributes).length&&s.attr(e.attributes),e.checked&&(t.addClass("default selected"),s.prop("checked",!0)),o.prepend(s);var i="";this.options.searchOptions.searchText&&(i+=" "+e.name.toLowerCase()),this.options.searchOptions.searchValue&&(i+=" "+e.value.toLowerCase()),t.attr("data-search-term",x.trim(i)).prepend(o),n+=1},_ieVersion:function(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")&&parseInt(t.split("msie")[1])}},x.fn.multiselect=function(e){if(this.length){var o,s=arguments;return void 0===e||"object"===(void 0===e?"undefined":_typeof(e))?this.each(function(){x.data(this,"plugin_multiselect")||x.data(this,"plugin_multiselect",new i(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=x.data(this,"plugin_multiselect");t instanceof i&&"function"==typeof t[e]&&(o=t[e].apply(t,Array.prototype.slice.call(s,1))),"unload"===e&&x.data(this,"plugin_multiselect",null)}),o):void 0}}}(jQuery);